<!DOCTYPE html>
<html>
	<link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="../../static/css/public/reset.css?v=1.0.0.0" th:attr="href=@{/css/public/reset.css?v=1.0.0.0}">
    <link rel="stylesheet" type="text/css" href="../../static/css/public/common.css?v=1.0.0.0" th:attr="href=@{/css/public/common.css?v=1.0.0.0}">
    <link rel="stylesheet" type="text/css" href="../../static/css/public/element.css?v=1.0.0.1" th:attr="href=@{/css/public/element.css?v=1.0.0.1}" />
    <link rel="stylesheet" type="text/css" href="../../static/css/public/swiper-4.2.2.min.css?v=4.2.2.1" th:attr="href=@{/css/public/swiper-4.2.2.min.css?v=4.2.2.1}">
	<link rel="stylesheet" type="text/css" href="../../static/css/public/animate.min.css?v=1.0.0.1" th:attr="href=@{/css/public/animate.min.css?v=1.0.0.1}" />
	<link rel="stylesheet" type="text/css" href="../../static/css/public/smcc-styles.css?v=1.0.0.0" th:attr="href=@{/css/public/smcc-styles.css?v=1.0.0.0}" />
    
    <link rel="stylesheet" type="text/css" href="../../static/css/public/smcc-footer.css?v=1.0.1.0" th:attr="href=@{/css/public/smcc-footer.css?v=1.0.1.0}" />

	<link rel="stylesheet" type="text/css" href="../../static/css/public/jc-breadcrumb.css?v=1.0.0.0" th:attr="href=@{/css/public/jc-breadcrumb.css?v=1.0.0.0}" />
	<link rel="stylesheet" type="text/css" href="../../static/css/public/font-awesome.css?v=1.0.0.1" th:attr="href=@{/css/public/font-awesome.css?v=1.0.0.1}" />
  <link rel="stylesheet" type="text/css" href="../../static/css/private/safetyBulletin.css" th:attr="href=@{/css/private/safetyBulletin.css}"/>
  <style></style>
	</head>
	<body>
<div id="managementList" v-cloak>

  <div class="content">
     <div class="navigationTitle">
       首页 > 信息安全管理 > 通报管理 > 安全公告 > 公告管理
      </div>
      <!--filterCont-->
      <div class="filterCont">
         <el-form ref="form" :model="formData" label-width="90px">
             <div class="formObj">
                <div class="formSame"> 
                   <el-form-item label="公告名称:">
                            <el-input v-model="formData.bulletinName" clearable placeholder="请输入公告名称" class="entering">
                            </el-input>
                  </el-form-item>
                </div>

                <div class="formSameDate"> 
                  <el-form-item label="发布时间:">
                   <div class="queryDate">
                       <div class="queryDateSame">
                      <el-date-picker class="dateIonicVB dateWidth" prefix-icon="dateIonic" type="date" clearable placeholder="选择日期" v-model="formData.timeStart"></el-date-picker>
                       </div>
                   <div class="reachLine">到</div>
                      <div class="queryDateSame">
                         <el-date-picker class="dateIonicVB dateWidth" prefix-icon="dateIonic" type="date" clearable placeholder="选择日期" v-model="formData.timeEnd"
                         @change="timeEnd"
                         :picker-options="pickerOptions0">
                       </el-date-picker>
                       </div>
                    </div>
                  </el-form-item>
                </div>

        <div class="formSameButton"> 
    <p style="float:right; margin-top:3px">
      <button type="button" class="btnSame btnSmall btnCancel"  @click="generalQuery" >查询</button>
      <button type="button" class="btnSame btnBig btnBlue" @click="advancedQuery">
      高级查询
      <i></i>
    </button> 
      <button type="button" class="btnSame btnSmall btnCancel" @click="reset">清空</button> 
      </p> 
   </div>
                </div>
 <div class="formObj">
  <div class="formSame"> 
      <el-form-item label="类别:">
    <el-select class="selectInput removeCalss entering" v-model="formData.category" clearable placeholder="请选择"  @change="findCategoryEvent">
      <el-option
      v-for="(item,index) in genreList"
      :key="index"
      :label="item.noteCategoryName"
      :value="item.categoryID">
    </el-option>
    </el-select>
  </el-form-item>
    </div>

    <div class="formSame"> 
      <el-form-item label="子类别:">
    <el-select class="selectInput removeCalss entering" v-model="formData.subcategory" clearable placeholder="请选择" @change="subcategoryEvent" >
      <el-option
      v-for="(item,index) in findChildList"
      :key="index"
      :label="item.noteCategoryName"
      :value="item.categoryID">
    </el-option>
    </el-select>
  </el-form-item>
</div>
</div>
    
    <div  v-show="subcategory" style="background-color:#f8f8f8; width:100%; padding:15px 0">
            <el-form-item label="关键字:"  >
                <el-input v-model="formData.keyword"  clearable  placeholder="请输入关键字" class="entering" ></el-input>
             </el-form-item>
      </div>
         </el-form>
      </div>
      <!--filterCont-->

      <!-- bulletinLlist -->  
    <div class="bulletinLlist">
       <div class="noticeTitle">
            <div class="noticeTitleLeft">
              <p><i></i><span>安全公告管理列表</span></p>
        </div>
    </div>

<!-- bulletinLlistCont -->
    <div class="bulletinLlistCont">
      <div class="bulletinLlistBtn">
        <button type="button" class="addBtn" @click="addBtn">新增</button>
        <button type="button" class="btnBig" :class="{gray:addGray,deleteBtn:!addGray}" @click="batchDeletingAlert" :disabled="unavailable">批量删除</button>
        <button type="button" class="btnSmall" :class="{gray:addGray,setTopBtn:!addGray}" :disabled="unavailable" @click="batchPlacement">置顶</button>
        <button type="button" class="btnBig" :class="{gray:addGray,cancelBtn:!addGray}" :disabled="unavailable" @click="batchCancellation">取消置顶</button>
    </div>
<!--tableList -->
    <div class="tableList">
      <template>
  <el-table
    ref="multipleTable"
    border
    :data="managementComputed"
    tooltip-effect="dark"
    style="width: 100%"
    @selection-change="selectionChange"
    @header-dragend="headerDragend"
    @sort-change="sortChange"
    >
    <el-table-column
      type="selection"
      width="40">
    </el-table-column>
    <el-table-column
      label="序号"
      width="50"
      >
     <template slot-scope="scope">
      {{scope.$index+1+pageSizeNow*(currPageNow-1)}}
     </template>
    </el-table-column>
    <el-table-column
      label="公告名称"
      prop="noticename"
      sortable
      width="200px"
      >
       <template slot-scope="scope">
        <p class="cellAll">
       <a :title="scope.row.noticename" class="hoverALink" :href="'managementDetails?pkId='+scope.row.pkId">{{scope.row.noticename}}</a>
       </p>
     </template>

    </el-table-column>
    <el-table-column
      prop="categoryName"
      label="类别"
      sortable
      width="100px"
      >
    </el-table-column>
    <el-table-column
      prop="childCategoryName"
      label="子类别"
      width="100px"
      sortable
      >
    </el-table-column>
    <el-table-column
      prop="keyword"
      label="关键字"
      sortable
      >
    </el-table-column>
     <el-table-column
      label="是否过期"
      prop="expiredate"
      sortable
      >
       <template slot-scope="scope">
        <span v-if="!scope.row.overdue" class="spanNotExpired">
          未过期
        </span>
        <span v-else>已过期</span>
      </template>
    </el-table-column>
    <el-table-column
      label="是否置顶"
      prop="top"
      sortable
      >
      <template slot-scope="scope">
          <span class="spanSetTop" v-if="scope.row.top=='1'">置顶</span>
          <span v-if="scope.row.top!='1'">未置顶</span>
      </template>
    </el-table-column>
    <el-table-column
      label="发布状态"
      prop="dataStatus"
      sortable
      >
      <template slot-scope="scope">
          <span class="spanPublished" v-if="scope.row.dataStatus=='1'">已发布</span>
          <span v-if="scope.row.dataStatus!='1'">未发布</span>
      </template>
    </el-table-column>
    <el-table-column
      label="发布时间"
      prop="publishdate"
      sortable
      >
      <template slot-scope="scope">
         <p><span>{{transformDate(scope.row.publishdate).yearText}}</span>
          <span  style="padding-left:10px" >{{transformDate(scope.row.publishdate).timeText}}</span>
          </p>
     </template>
    </el-table-column>
     <el-table-column
      label="创建时间"
      prop="createTime"
      sortable
      >
      <template slot-scope="scope">
         <p><span>{{transformDate(scope.row.createTime).yearText}}</span>
            <span  style="padding-left:10px" >{{transformDate(scope.row.createTime).timeText}}</span>
         </p>
     </template>
    </el-table-column>
     <el-table-column
      label="操作"
      >
      <template slot-scope="scope">
        <div class="operation">
        <div style="display: inline"> <span class="spanEdit" @click="editClick(scope.row.pkId)"><strong>编辑</strong> |</span></div>
        <div style="display: inline"> 
         <span class="spanEdit" v-if="scope.row.dataStatus!='1'"  @click="deleteAlert(scope.row.pkId)"><strong>删除</strong> |</span>
         <span class="spanEdit" v-else-if="scope.row.overdue">
           <strong>删除</strong> |
         </span>
        </div>
        <div style="display: inline">
          <span class="spanEdit" @click="release(scope.row.pkId)" v-if="(scope.row.dataStatus!='1' && !scope.row.overdue) "><strong>发布</strong> |</span> 
        </div>
        <div style="display: inline">
           <span class="spanEdit" @click="revoke(scope.row.pkId)" v-if="(scope.row.dataStatus=='1' && !scope.row.overdue ) "><strong>撤销</strong> |</span>
        </div>
     <div style="display: inline">
           <span class="spanEdit" v-if="(scope.row.top!='1' && !scope.row.overdue && scope.row.dataStatus=='1' ) " @click="oneSetTop(scope.row.pkId)"><strong>置顶</strong> |</span>
        </div>
         <div style="display: inline">
           <span class="spanEdit" v-if="(scope.row.top=='1' && !scope.row.overdue && scope.row.dataStatus=='1' ) " @click="cancelOneSetTop(scope.row.pkId)"><strong>取消置顶</strong> |</span>
        </div>
         </div>
     </template>
    </el-table-column>
  </el-table>
</template>
    </div>
<!--tableList -->

<div class="bulletinContBottom">
            <el-row>
                  <el-col :span="14">
                  <div class="outLine" >
                     显示
                     <div class="outlineCont" style="width:80px; display:inline-block">
                     <el-select @change="outLineChange" width="100%" v-model="outLineText">
                      <el-option
                        v-for="item in outLineArr"
                        :key="item.value"
                        :label="item.label"
                        :value="item.value">
                       </el-option>
                    </el-select>
                    </div>
                    行,
                     共{{totalCount}}行记录
                  </div>
                  </el-col>
                  <el-col :span="10"> 
                   <el-pagination style="float:right" background layout="prev, pager,next,slot,jumper" :total="totalCount" prev-text="上一页" next-text="下一页" :pager-count="5"  @current-change="currentChange" :current-page.sync="currentPage" :page-size="outLineText">
                    <span class="totalNumber">共{{Math.ceil(totalCount/outLineText)}}页 , </span>
                    </el-pagination>
                  </el-col>
             </el-row>
</div>
    </div>
<!-- bulletinLlistCont -->
    </div>
    <!-- bulletinLlist -->
  </div>

<!-- 删除 -->
<div class="popupMessage mdw-popup releaseDelete releaseOne">
  <div class="determineContTop" style="width:230px">
           <div class="determineLeft">
             <img src="/imgs/safetyBulletin/bigErr.png" alt="">
           </div>
           <div class="determineRight">
             <p><span>是否删除所选安全公告？</span></p>
           </div>
       </div>
       <div class="determineContBtm">
          <button type="button" class="btnSame btnSmall btnDelete" @click="deleteOne">确定</button>
          <button type="button" class="btnSame btnSmall btnCancel"  @click="cancelDeleteOne">取消</button>
       </div>
</div>
<!-- 删除 -->

<!-- 批量删除 -->
<div class="popupMessage mdw-popup releaseDelete batchDeleting">
  <div class="determineContTop" style="width:230px">
           <div class="determineLeft">
             <img src="/imgs/safetyBulletin/bigErr.png" alt="">
           </div>
           <div class="determineRight">
             <p><span>是否删除所选安全公告？</span></p>
           </div>
       </div>
       <div class="determineContBtm">
          <button type="button" class="btnSame btnSmall btnDelete" @click="batchDeleting">确定</button>
          <button type="button" class="btnSame btnSmall btnCancel"  @click="cancelBatchDeleting">取消</button>
       </div>
</div>
<!-- 批量删除 -->

</div>

<!-- 成功 -->
<div class="popupMessage mdw-popup releaseSuccess">
  <div class="popupMessageCont">
   <img src="/imgs/safetyBulletin/cg.png" alt="">
   <span class="successText"></span>
   </div> 
</div>
<!-- 成功 -->




<!-- 失败 -->
<div class="popupMessage mdw-popup releaseFail">
  <div class="popupMessageCont">
   <img src="/imgs/safetyBulletin/sb.png" alt="">
   <span class="failText"></span>
   </div> 
</div>
<!-- 失败 -->

<script id="src-qianhou" data-src="../../static" th:attr="data-src=@{../}"></script>
<div>
	<script type="text/javascript" src="../../static/js/public/es6-promise.auto.js?v=1.0.0.1" th:attr="src=@{/js/public/es6-promise.auto.js?v=1.0.0.1}"></script>
    <script type="text/javascript" src="../../static/js/public/jquery.min.js?v=1.0.0.1" th:attr="src=@{/js/public/jquery.min.js?v=1.0.0.1}"></script>
    <script type="text/javascript" src="../../static/js/public/jquery.cookie.js?v=1.0.0.1" th:attr="src=@{/js/public/jquery.cookie.js?v=1.0.0.1}"></script>
    <script type="text/javascript" src="../../static/js/public/getdata.js?v=1.0.0.0" th:attr="src=@{/js/public/getdata.js?v=1.0.0.0}"></script>
    <script type="text/javascript" src="../../static/js/public/vue.js?v=1.0.0.1" th:attr="src=@{/js/public/vue.js?v=1.0.0.1}"></script>
    <script type="text/javascript" src="../../static/js/public/PublicFunction.js?v=1.0.0.0" th:attr="src=@{/js/public/PublicFunction.js?v=1.0.0.0}"></script>
    <script type="text/javascript" src="../../static/js/public/element.js?v=1.0.0.1" th:attr="src=@{/js/public/element.js?v=1.0.0.1}"></script>
     	
    <!-- 组件 pulic（公用）private（私有）-->
    <script src="../../static/compents/public/smcc-footer/smcc-footer.js" th:attr="src=@{/compents/public/smcc-footer/smcc-footer.js}"></script>
    <script src="../../static/compents/public/smcc-breadcrumb/smcc-breadcrumb.js?v=1.0.0.0" th:attr="src=@{/compents/public/smcc-breadcrumb/smcc-breadcrumb.js?v=1.0.0.0}"></script>
    <script type="text/javascript" src="../../static/compents/public/smcc-compents.js" th:attr="src=@{/compents/public/smcc-compents.js}"></script>
      <script type="text/javascript" src="../../static/js/private/safetyBulletin/jquery.zt.js" th:attr="src=@{/js/private/safetyBulletin/jquery.zt.js}"></script>
      <script  type="text/javascript" src="../../static/js/private/safetyBulletin/managementList.js" th:attr="src=@{/js/private/safetyBulletin/managementList.js}"></script>
</div>
	</body>
</html>